<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ziwei's Site</title><meta name=keywords content><meta name=description content="<!DOCTYPE html>



Frozen Lake Demo ‚Äì Stats + Average & Goal Stay






  Size (N√óN):
    
  

  Holes p:
    
  

  
     Slippery
  

  
  Start Game











"><meta name=author content><link rel=canonical href=https://ziwei-jiang.github.io/frozen_lake_game/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.175f8a2522675f2652eb58ad47be19952cb91de9e66edc4b95bb19fff5546ef5.css integrity="sha256-F1+KJSJnXyZS61itR74ZlSy5HenmbtxLlbsZ//VUbvU=" rel="preload stylesheet" as=style><link rel=icon href=https://ziwei-jiang.github.io/img/abra_icon.png><link rel=icon type=image/png sizes=16x16 href=https://ziwei-jiang.github.io/img/abra_icon.png><link rel=icon type=image/png sizes=32x32 href=https://ziwei-jiang.github.io/img/abra_icon.png><link rel=apple-touch-icon href=https://ziwei-jiang.github.io/img/abra_icon.png><link rel=mask-icon href=https://ziwei-jiang.github.io/img/abra_icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ziwei-jiang.github.io/frozen_lake_game/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-H4P7KF2N8Z"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-H4P7KF2N8Z")}</script><meta property="og:url" content="https://ziwei-jiang.github.io/frozen_lake_game/"><meta property="og:site_name" content="Ziwei's Site"><meta property="og:title" content="Ziwei's Site"><meta property="og:description" content="<!DOCTYPE html> Frozen Lake Demo ‚Äì Stats + Average & Goal Stay Size (N√óN): Holes p: Slippery Start Game "><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="og:image" content="https://ziwei-jiang.github.io/frozen_lake_game/frozen_lake_cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ziwei-jiang.github.io/frozen_lake_game/frozen_lake_cover.png"><meta name=twitter:title content><meta name=twitter:description content="<!DOCTYPE html>



Frozen Lake Demo ‚Äì Stats + Average & Goal Stay






  Size (N√óN):
    
  

  Holes p:
    
  

  
     Slippery
  

  
  Start Game











"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"","item":"https://ziwei-jiang.github.io/frozen_lake_game/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"\u003c!DOCTYPE html\u003e Frozen Lake Demo ‚Äì Stats + Average \u0026 Goal Stay Size (N√óN): Holes p: Slippery Start Game ","keywords":[],"articleBody":"\u003c!DOCTYPE html\u003e Frozen Lake Demo ‚Äì Stats + Average \u0026 Goal Stay Size (N√óN): Holes p: Slippery Start Game ","wordCount":"19","inLanguage":"en","image":"https://ziwei-jiang.github.io/frozen_lake_game/frozen_lake_cover.png","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://ziwei-jiang.github.io/frozen_lake_game/"},"publisher":{"@type":"Organization","name":"Ziwei's Site","logo":{"@type":"ImageObject","url":"https://ziwei-jiang.github.io/img/abra_icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ziwei-jiang.github.io/ accesskey=h title="Ziwei Jiang ÂßúÂ≠êÁª¥ (Alt + H)"><img src=https://ziwei-jiang.github.io/img/abra_icon.png alt aria-label=logo height=35>Ziwei Jiang ÂßúÂ≠êÁª¥</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ziwei-jiang.github.io/about/ title=About><span>About</span></a></li><li><a href=https://ziwei-jiang.github.io/notes/ title=Notes><span>Notes</span></a></li><li><a href=https://ziwei-jiang.github.io/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://ziwei-jiang.github.io/publications/ title=Publications><span>Publications</span></a></li><li><a href=https://ziwei-jiang.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ziwei-jiang.github.io/>Home</a></div><h1 class=post-title></h1><div class=post-meta></div></header><div class=post-content><!doctype html><html lang=en><head><meta charset=UTF-8><title>Frozen Lake Demo ‚Äì Stats + Average & Goal Stay</title><style>body{margin:0;display:flex;flex-direction:column;align-items:center;font-family:sans-serif;background:#e7f4ff;height:100vh;overflow:hidden}#setup{margin-top:40px}#setup input[type=number]{width:4rem;text-align:center}#setup label{margin-left:8px}canvas{border:2px solid #333;image-rendering:pixelated;margin-top:10px}#msg,#steps,#stats,#avg{margin-top:6px}*,*::before,*::after{box-sizing:border-box}body{margin:0;font-family:sans-serif;background:#e7f4ff;display:flex;flex-direction:column;align-items:center;min-height:100vh}#setup{margin-top:40px;display:flex;flex-wrap:wrap;column-gap:1rem;row-gap:.5rem;align-items:center;font-size:1rem;line-height:1.2}#setup label{display:flex;align-items:center;gap:.35rem}#setup input[type=number]{width:4rem;padding:2px 4px;text-align:center;font:inherit}#setup button{cursor:pointer;padding:4px 10px;font:inherit;border:1px solid #333;background:#fff;border-radius:4px}canvas{border:2px solid #333;image-rendering:pixelated;margin-top:10px}#msg,#steps,#stats,#avg{margin-top:6px}#setup input[type=number]::-webkit-inner-spin-button,#setup input[type=number]::-webkit-outer-spin-button{-webkit-appearance:inner-spin-button !important;opacity:1 !important}</style></head><body><div id=setup><label>Size (N√óN):
<input id=size type=number min=4 max=12 value=4>
</label><label>Holes p:
<input id=prob type=number min=0 max=0.5 step=0.05 value=0.20>
</label><label><input id=slipChk type=checkbox checked> Slippery
</label><button id=startBtn tabindex=-1>Start Game</button></div><canvas id=c></canvas><div id=msg></div><div id=steps></div><div id=stats></div><div id=avg></div><script>const sizeInput=document.getElementById("size"),probInput=document.getElementById("prob");[sizeInput,probInput].forEach(e=>{e.addEventListener("keydown",e=>{const t=["ArrowUp","ArrowDown","Tab","Shift","Alt","Control","Meta","Home","End"];t.includes(e.key)||e.preventDefault()}),["paste","drop"].forEach(t=>e.addEventListener(t,e=>e.preventDefault()))});const SPRITES={},TO_LOAD=[["elf_up","elf_up.png"],["elf_down","elf_down.png"],["elf_left","elf_left.png"],["elf_right","elf_right.png"],["ice","ice.png"],["hole","hole.png"],["cracked_hole","cracked_hole.png"],["goal","goal.png"],["stool","stool.png"]];let READY=!1;function loadSprites(e){let t=TO_LOAD.length;TO_LOAD.forEach(([n,s])=>{const o=new Image;o.src=s,o.onload=()=>{--t===0&&(READY=!0,e())},SPRITES[n]=o})}const SLIP_PROB=.8;let N=4,MAP=[],TILE=80,slippery=!0,canvas=document.getElementById("c"),ctx=canvas.getContext("2d");const msgEl=document.getElementById("msg"),stepEl=document.getElementById("steps"),statEl=document.getElementById("stats"),avgEl=document.getElementById("avg");let agent={},splash=null,steps=0,wins=0,episodes=0,totalWinSteps=0;const DIRS={ArrowUp:{dr:-1,dc:0,left:"ArrowLeft",right:"ArrowRight",sprite:"elf_up"},ArrowDown:{dr:1,dc:0,left:"ArrowRight",right:"ArrowLeft",sprite:"elf_down"},ArrowLeft:{dr:0,dc:-1,left:"ArrowDown",right:"ArrowUp",sprite:"elf_left"},ArrowRight:{dr:0,dc:1,left:"ArrowUp",right:"ArrowDown",sprite:"elf_right"}};function genMap(e,t=.2,n=200){const o=[[1,0],[-1,0],[0,1],[0,-1]],i=t=>{const n=[[0,0]],s=new Set(["0,0"]);for(;n.length;){const[i,a]=n.shift();if(i===e-1&&a===e-1)return!0;for(const[d,u]of o){const r=i+d,c=a+u,l=`${r},${c}`;r>=0&&c>=0&&r<e&&c<e&&t[r][c]!=="H"&&!s.has(l)&&(s.add(l),n.push([r,c]))}}return!1};for(let o=0;o<n;o++){const s=Array.from({length:e},t=>Array.from({length:e},e=>"F"));for(let n=0;n<e;n++)for(let o=0;o<e;o++){if(n===0&&o===0||n===e-1&&o===e-1)continue;s[n][o]=Math.random()<t?"H":"F"}if(s[0][0]="S",s[e-1][e-1]="G",i(s))return s}const s=Array.from({length:e},t=>Array.from({length:e},e=>"F"));return s[0][0]="S",s[e-1][e-1]="G",s}function fitCanvas(){TILE=Math.floor(Math.min(innerWidth,innerHeight-180)/N),TILE=Math.max(32,Math.min(96,TILE)),canvas.width=TILE*N,canvas.height=TILE*N}function drawTile(e,t,n){ctx.drawImage(e,n*TILE,t*TILE,TILE,TILE)}function drawBoard(){ctx.clearRect(0,0,canvas.width,canvas.height);for(let e=0;e<N;e++)for(let t=0;t<N;t++){const n=MAP[e][t];n==="H"?splash&&splash.r===e&&splash.c===t&&!agent.alive?drawTile(SPRITES.cracked_hole,e,t):drawTile(SPRITES.hole,e,t):(drawTile(SPRITES.ice,e,t),n==="G"&&drawTile(SPRITES.goal,e,t),n==="S"&&drawTile(SPRITES.stool,e,t))}(agent.alive||agent.won)&&drawTile(SPRITES[agent.dir],agent.r,agent.c)}function updateSteps(){stepEl.innerText=`Steps: ${steps}`}function updateStats(){statEl.innerText=`Stats: ${wins} / ${episodes}`}function updateAvg(){avgEl.innerText=wins?`Avg steps (wins): ${(totalWinSteps/wins).toFixed(1)}`:`Avg steps (wins): ‚Äì`}function newGame(e,t,n){N=e,slippery=n,splash=null,MAP=genMap(N,t),agent={r:0,c:0,dir:"elf_down",alive:!0,won:!1},steps=0,fitCanvas(),drawBoard(),msgEl.innerText="Reach the üéÅ without falling in üíß. Use ‚Üë‚Üê‚Üì‚Üí",updateSteps(),updateStats(),updateAvg()}function step(e){if(!DIRS[e]||!agent.alive)return;if(!slippery){move(e);return}let t=e,n=Math.random();n>SLIP_PROB&&(t=n<SLIP_PROB+(1-SLIP_PROB)/2?DIRS[e].left:DIRS[e].right),move(t)}function move(e){const{dr:o,dc:i,sprite:a}=DIRS[e],t=agent.r+o,n=agent.c+i;if(t<0||n<0||t>=N||n>=N)return;steps++,updateSteps(),agent.r=t,agent.c=n,agent.dir=a;const s=MAP[t][n];(s==="H"||s==="G")&&(splash=s==="H"?{r:t,c:n}:null,agent.alive=!1,agent.won=s==="G",episodes++,agent.won&&(wins++,totalWinSteps+=steps),updateStats(),updateAvg(),msgEl.innerText=agent.won?"üéâ You reached the gift! ‚Äì press any key to play again":"üíß You fell in! ‚Äì press any key to play again"),drawBoard()}document.getElementById("startBtn").onclick=()=>{if(!READY)return;wins=episodes=totalWinSteps=0;const e=Math.max(4,Math.min(12,parseInt(size.value)||4)),t=Math.max(0,Math.min(.5,parseFloat(prob.value)||.2)),n=document.getElementById("slipChk").checked;newGame(e,t,n),document.getElementById("startBtn").blur()},window.addEventListener("keydown",e=>{if(!READY)return;if(!agent.alive){const e=parseFloat(prob.value)||.2,t=document.getElementById("slipChk").checked;newGame(N,e,t)}step(e.key)}),window.addEventListener("resize",fitCanvas),loadSprites(()=>newGame(4,.2,!0))</script></body></html></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://ziwei-jiang.github.io/>Ziwei's Site</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>