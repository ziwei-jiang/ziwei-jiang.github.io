<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Robotics Specialization: Aerial Robotics | Ziwei Jiang</title><meta name=keywords content="Robotics,Control"><meta name=description content="Controller design for quadrotors.  "><meta name=author content="Me"><link rel=canonical href=https://ziwei-jiang.github.io/projects/robotics_specialization/aerial_robotics/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.859ddde1d7c355a793e94a292a15a1d6506f4128a15ddb2306e51700fd2ae9c5.css integrity="sha256-hZ3d4dfDVaeT6UopKhWh1lBvQSihXdsjBuUXAP0q6cU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ziwei-jiang.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ziwei-jiang.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ziwei-jiang.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://ziwei-jiang.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ziwei-jiang.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Robotics Specialization: Aerial Robotics"><meta property="og:description" content="Controller design for quadrotors.  "><meta property="og:type" content="article"><meta property="og:url" content="https://ziwei-jiang.github.io/projects/robotics_specialization/aerial_robotics/"><meta property="og:image" content="https://ziwei-jiang.github.io/projects/robotics_specialization/aerial_robotics/projects/robotics_specialization/imgs/course1/aerial_robot.png"><meta property="article:section" content="projects"><meta property="article:published_time" content="2016-02-15T11:30:03+00:00"><meta property="article:modified_time" content="2016-02-15T11:30:03+00:00"><meta property="og:site_name" content="Ziwei's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ziwei-jiang.github.io/projects/robotics_specialization/aerial_robotics/projects/robotics_specialization/imgs/course1/aerial_robot.png"><meta name=twitter:title content="Robotics Specialization: Aerial Robotics"><meta name=twitter:description content="Controller design for quadrotors.  "><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"https://ziwei-jiang.github.io/projects/"},{"@type":"ListItem","position":2,"name":"Robotics Specialization: Aerial Robotics","item":"https://ziwei-jiang.github.io/projects/robotics_specialization/aerial_robotics/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Robotics Specialization: Aerial Robotics","name":"Robotics Specialization: Aerial Robotics","description":"Controller design for quadrotors.  ","keywords":["Robotics","Control"],"articleBody":"Here’s the assignment for the Robotics Specialization: Aerial Robotics offered by UPenn on Coursera.\nIn this course, we learned some basic ideas about autonomous robots and the design of quadrotors. There are three assignments in this course in which we learned to design a PD controller for a quadrotor in 1D, 2D, and 3D. The course provided quadrotor simulators to help with the experiment. The simulator uses MATLAB’s ODE solver, ode45, to simulate the behavior of the quadrotor and plt3 to visualize the state of the quadrotor at each time step.\n1D Quadrotor Control For the first part, we only consider the motion in $z$-axis as shown in the figure. Quadrotor's vertical motion The net-force in vertical direction is given by $$F=m\\ddot{z} = u - mg$$ where $u$ is the motor thrusts. The dynamic of the quadrotor in the vertical direction can be described by the following differential equation $$\\ddot{z}= \\frac{u}{m}- g.$$\nWe can measure the current position and velocity of the quadrotor in the vertical direction. Then we can use these and desired position and velocity to calculate the errors $$e = z_{des} - z.$$\nThe control input for a PD controller is $$u=m(\\ddot{z}+ K_pe + K_d\\dot{e} +g)$$ By choosing proper values for proportional and derivative gain, we can make the quadrotor respond quickly to a step input. The result is as Quadrotor's response to step input 2D Quadrotor Control For the second part, we learned to control the quadrotor in the 2D plane, as shown in the following figure. Quadrotor's planar motion In the figure, $a_2, a_3$ denote the inertial frame, and $b_2, b_3$ denote the body frame. In this setup, we want to control the quadrotor’s elevation and roll angle with two inputs: the thrust force ($u_1$) and the moment ($u_2$). The thrust force is defined as the sum of the thrusts at each rotor $$u_1 = F_1+F_2,$$ and the moment is the difference between the thrusts of two rotors times the arm length of the quadrotor ($L$), $$u_2 = L(F_1 - F_2).$$\nSuppose we can measure the position, velocity, acceleration, and angular acceleration of the robot. Let $r=[y, z]^T$ denote the position vector of the quadrotor in the inertial frame, and $R$ be the rotation matrix that transforms vector components from the body frame to the inertial frame. $$ R = \\begin{bmatrix} \\cos(\\phi) \u0026 -\\sin(\\phi) \\\\ \\sin(\\phi) \u0026 \\cos(\\phi) \\end{bmatrix} $$ The net force in the $Y, Z$ direction is given by $$ m \\begin{bmatrix} \\ddot{y} \\\\ \\ddot{z} \\end{bmatrix} = \\begin{bmatrix} 0 \\\\ -mg \\end{bmatrix} + R\\begin{bmatrix} 0 \\\\ u_1 \\end{bmatrix} = \\begin{bmatrix} 0 \\\\ -mg \\end{bmatrix} + \\begin{bmatrix} -u_1 \\sin(\\phi) \\\\ u_1\\cos(\\phi)\\end{bmatrix}.$$ The angular acceleration is given by $$ I_{xx}\\ddot{\\phi} = L(F_1 - F_2) = u_2.$$ Therefore, the system model is given by $$\\begin{bmatrix} \\ddot{y} \\\\ \\ddot{z} \\\\ \\ddot{\\phi} \\end{bmatrix} = \\begin{bmatrix} 0 \\\\ -g \\\\ 0 \\end{bmatrix} + \\begin{bmatrix} -\\frac{1}{m} \\sin(\\phi) \u0026 0 \\\\ \\frac{1}{m} \\cos(\\phi) \u0026 0 \\\\ 0 \u0026 \\frac{1}{I_{xx}}\\end{bmatrix} \\begin{bmatrix} u_1 \\\\ u_2\\end{bmatrix}.$$\nThe dynamic model of the quadrotor is nonlinear, so we need to linearize the equation of motions in order to apply the PD controller. For the quadrotor, the equilibrium point is the configuration at any position $(y^{(t)}, z^{(t)})$ with zero roll angle; and the thrust force is equal to the gravity $mg$. So we have $y^{(t)}, z^{(t)}, \\phi^{(t)}=0, u_1^{(t)} = mg, u_2^{(t)} = 0$. By the first-order Taylor approximation, we have $\\sin(\\phi^{(t)})\\approx 0, \\cos(\\phi^{(t)}) \\approx 1$. Thus the above system model can be written as $$\\begin{bmatrix} \\ddot{y} \\\\ \\ddot{z} \\\\ \\ddot{\\phi} \\end{bmatrix} = \\begin{bmatrix} -g\\phi \\\\ -g + \\frac{u_1}{m} \\\\ \\frac{u_2}{I_{xx}} \\end{bmatrix}, $$ and $$ \\begin{bmatrix} u_1 \\\\ u_2 \\\\ \\phi \\end{bmatrix} = \\begin{bmatrix} m(\\ddot{z} +g) \\\\ I_{xx}\\ddot{\\phi} \\\\ -\\frac{\\ddot{y}}{g} \\end{bmatrix}. $$\nLet $s$ denotes the state variable $(y$, $z$ or $\\phi)$ and $s_T(t)$ be the desired state variable at time $t$. Define the position and velocity errors as $$\\begin{bmatrix} e \\\\ \\dot{e} \\end{bmatrix} = \\begin{bmatrix} s_T(t) - s \\\\ \\dot s_T(t) - \\dot{s}\\end{bmatrix}.$$ The error should satisfy the following differential equation, $$ (\\ddot r_T(t) - \\ddot{r}) + K_d\\dot{e} + K_pe = 0. $$ So the commanded acceleration of the state can be expressed as $$ \\ddot{r} = \\ddot r_T(t) + K_d\\dot{e}+ K_pe . $$ The input can be expressed as $$ \\begin{bmatrix} u_1 \\\\ u_2 \\\\ \\phi \\end{bmatrix} = \\begin{bmatrix} m(\\ddot z_T(t) + K_{d,z}(\\dot z_T(t)-\\dot z)+ K_{p,z}(z_T(t) - z) +g) \\\\ I_{xx}(\\ddot \\phi_T(t) + K_{d,\\phi}(\\dot \\phi_T(t)-\\dot \\phi)+ K_{p,\\phi}(\\phi_T(t) - \\phi)) \\\\ -\\frac{1}{g} (\\ddot y_T(t) + K_{d,y}(\\dot y_T(t)-\\dot y)+ K_{p,y}(y_T(t) - y))\\end{bmatrix} .$$ The resulting controller is as shown below. 2D trajectory ","wordCount":"754","inLanguage":"en","image":"https://ziwei-jiang.github.io/projects/robotics_specialization/aerial_robotics/projects/robotics_specialization/imgs/course1/aerial_robot.png","datePublished":"2016-02-15T11:30:03Z","dateModified":"2016-02-15T11:30:03Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ziwei-jiang.github.io/projects/robotics_specialization/aerial_robotics/"},"publisher":{"@type":"Organization","name":"Ziwei Jiang","logo":{"@type":"ImageObject","url":"https://ziwei-jiang.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ziwei-jiang.github.io/ accesskey=h title="Ziwei Jiang (Alt + H)"><img src=https://ziwei-jiang.github.io/images/coding.png alt aria-label=logo height=35>Ziwei Jiang</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ziwei-jiang.github.io/posts/ title=Blogs><span>Blogs</span></a></li><li><a href=https://ziwei-jiang.github.io/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://ziwei-jiang.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Robotics Specialization: Aerial Robotics</h1><div class=post-description>Controller design for quadrotors.</div><div class=post-meta><span title='2016-02-15 11:30:03 +0000 +0000'>February 15, 2016</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;754 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/projects/robotics_specialization/aerial_robotics.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy src=https://ziwei-jiang.github.io/projects/robotics_specialization/imgs/course1/aerial_robot.png alt><p></p></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#1d-quadrotor-control aria-label="1D Quadrotor Control">1D Quadrotor Control</a></li><li><a href=#2d-quadrotor-control aria-label="2D Quadrotor Control">2D Quadrotor Control</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>Here&rsquo;s the assignment for the <em>Robotics Specialization: Aerial Robotics</em> offered by UPenn on Coursera.</p><p>In this course, we learned some basic ideas about autonomous robots and the design of quadrotors. There are three assignments in this course in which we learned to design a PD controller for a quadrotor in 1D, 2D, and 3D.
The course provided quadrotor simulators to help with the experiment. The simulator uses MATLAB&rsquo;s ODE solver, ode45, to simulate the behavior of the quadrotor and plt3 to visualize the state of the quadrotor at each time step.</p><h1 id=1d-quadrotor-control>1D Quadrotor Control<a hidden class=anchor aria-hidden=true href=#1d-quadrotor-control>#</a></h1><p>For the first part, we only consider the motion in $z$-axis as shown in the figure.<figure class=align-center><img loading=lazy src=/projects/robotics_specialization/imgs/course1/1d_quad.png#center width=50%><figcaption>Quadrotor's vertical motion</figcaption></figure>The net-force in vertical direction is given by
$$F=m\ddot{z} = u - mg$$
where $u$ is the motor thrusts.
The dynamic of the quadrotor in the vertical direction can be described by the following differential equation
$$\ddot{z}= \frac{u}{m}- g.$$</p><p>We can measure the current position and velocity of the quadrotor in the vertical direction. Then we can use these and desired position and velocity to calculate the errors
$$e = z_{des} - z.$$</p><p>The control input for a PD controller is
$$u=m(\ddot{z}+ K_pe + K_d\dot{e} +g)$$
By choosing proper values for proportional and derivative gain, we can make the quadrotor respond quickly to a step input. The result is as<figure class=align-center><img loading=lazy src=/projects/robotics_specialization/imgs/course1/1d_step.gif#center width=100%><figcaption>Quadrotor's response to step input</figcaption></figure></p><h1 id=2d-quadrotor-control>2D Quadrotor Control<a hidden class=anchor aria-hidden=true href=#2d-quadrotor-control>#</a></h1><p>For the second part, we learned to control the quadrotor in the 2D plane, as shown in the following figure.<figure class=align-center><img loading=lazy src=/projects/robotics_specialization/imgs/course1/2d_quad.png#center width=80%><figcaption>Quadrotor's planar motion</figcaption></figure>In the figure, $a_2, a_3$ denote the inertial frame, and $b_2, b_3$ denote the body frame.
In this setup, we want to control the quadrotor&rsquo;s elevation and roll angle with two inputs: the thrust force ($u_1$) and the moment ($u_2$).
The thrust force is defined as the sum of the thrusts at each rotor
$$u_1 = F_1+F_2,$$
and the moment is the difference between the thrusts of two rotors times the arm length of the quadrotor ($L$),
$$u_2 = L(F_1 - F_2).$$</p><p>Suppose we can measure the position, velocity, acceleration, and angular acceleration of the robot. Let $r=[y, z]^T$ denote the position vector of the quadrotor in the inertial frame, and $R$ be the rotation matrix that transforms vector components from the body frame to the inertial frame.
$$ R = \begin{bmatrix} \cos(\phi) & -\sin(\phi) \\ \sin(\phi) & \cos(\phi) \end{bmatrix} $$
The net force in the $Y, Z$ direction is given by
$$ m \begin{bmatrix} \ddot{y} \\ \ddot{z} \end{bmatrix} = \begin{bmatrix} 0 \\ -mg \end{bmatrix} + R\begin{bmatrix} 0 \\ u_1 \end{bmatrix} = \begin{bmatrix} 0 \\ -mg \end{bmatrix} + \begin{bmatrix} -u_1 \sin(\phi) \\ u_1\cos(\phi)\end{bmatrix}.$$
The angular acceleration is given by
$$ I_{xx}\ddot{\phi} = L(F_1 - F_2) = u_2.$$
Therefore, the system model is given by
$$\begin{bmatrix} \ddot{y} \\ \ddot{z} \\ \ddot{\phi} \end{bmatrix} = \begin{bmatrix} 0 \\ -g \\ 0 \end{bmatrix} + \begin{bmatrix} -\frac{1}{m} \sin(\phi) & 0 \\ \frac{1}{m} \cos(\phi) & 0 \\ 0 & \frac{1}{I_{xx}}\end{bmatrix} \begin{bmatrix} u_1 \\ u_2\end{bmatrix}.$$</p><p>The dynamic model of the quadrotor is nonlinear, so we need to linearize the equation of motions in order to apply the PD controller. For the quadrotor, the equilibrium point is the configuration at any position $(y^{(t)}, z^{(t)})$ with zero roll angle; and the thrust force is equal to the gravity $mg$. So we have $y^{(t)}, z^{(t)}, \phi^{(t)}=0, u_1^{(t)} = mg, u_2^{(t)} = 0$. By the first-order Taylor approximation, we have $\sin(\phi^{(t)})\approx 0, \cos(\phi^{(t)}) \approx 1$. Thus the above system model can be written as
$$\begin{bmatrix} \ddot{y} \\ \ddot{z} \\ \ddot{\phi} \end{bmatrix} = \begin{bmatrix} -g\phi \\ -g + \frac{u_1}{m} \\ \frac{u_2}{I_{xx}} \end{bmatrix}, $$
and
$$ \begin{bmatrix} u_1 \\ u_2 \\ \phi \end{bmatrix} = \begin{bmatrix} m(\ddot{z} +g) \\ I_{xx}\ddot{\phi} \\ -\frac{\ddot{y}}{g} \end{bmatrix}. $$</p><p>Let $s$ denotes the state variable $(y$, $z$ or $\phi)$ and $s_T(t)$ be the desired state variable at time $t$. Define the position and velocity errors as
$$\begin{bmatrix} e \\ \dot{e} \end{bmatrix} = \begin{bmatrix} s_T(t) - s \\ \dot s_T(t) - \dot{s}\end{bmatrix}.$$
The error should satisfy the following differential equation,
$$ (\ddot r_T(t) - \ddot{r}) + K_d\dot{e} + K_pe = 0. $$
So the commanded acceleration of the state can be expressed as
$$ \ddot{r} = \ddot r_T(t) + K_d\dot{e}+ K_pe . $$
The input can be expressed as
$$ \begin{bmatrix} u_1 \\ u_2 \\ \phi \end{bmatrix} = \begin{bmatrix} m(\ddot z_T(t) + K_{d,z}(\dot z_T(t)-\dot z)+ K_{p,z}(z_T(t) - z) +g) \\ I_{xx}(\ddot \phi_T(t) + K_{d,\phi}(\dot \phi_T(t)-\dot \phi)+ K_{p,\phi}(\phi_T(t) - \phi)) \\ -\frac{1}{g} (\ddot y_T(t) + K_{d,y}(\dot y_T(t)-\dot y)+ K_{p,y}(y_T(t) - y))\end{bmatrix} .$$
The resulting controller is as shown below.<figure class=align-center><img loading=lazy src=/projects/robotics_specialization/imgs/course1/2d_traj.gif#center width=100%><figcaption>2D trajectory</figcaption></figure></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ziwei-jiang.github.io/tags/robotics/>Robotics</a></li><li><a href=https://ziwei-jiang.github.io/tags/control/>Control</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://ziwei-jiang.github.io/>Ziwei Jiang</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css integrity=sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js integrity=sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>